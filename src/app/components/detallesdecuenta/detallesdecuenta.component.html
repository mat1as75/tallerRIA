<div class="container-fluid">
  <div class="row">
    <!-- Botón para abrir el menú en móvil -->
    <div class="d-md-none p-4 pb-0 text-end">
      <button
        class="btn btn-outline-secondary"
        type="button"
        data-bs-toggle="offcanvas"
        data-bs-target="#sidebarOffcanvas"
        aria-controls="sidebarOffcanvas"
      >
        <i class="bi bi-list fs-5"></i>
      </button>
    </div>

    <!-- Sidebar en pantallas md en adelante -->
    <aside
      class="col-9 col-md-3 col-lg-2 d-none d-md-flex flex-column align-items-center mt-md-5 pt-4"
      style="min-height: 100vh"
    >
      <div
        class="bg-app-secondary border-light-gray rounded-3 w-100 p-3 h-75 d-flex flex-column"
      >
        <ul class="nav flex-column flex-grow-1 d-flex h-100">
          <!-- Enlaces de navegación -->
          <li class="nav-item mb-3">
            <a class="nav-link rounded-pill btn-hover" [routerLink]="['/home']">
              <i class="bi bi-house-door me-2"></i> Home
            </a>
          </li>
          <hr class="m-0" />

          <li class="nav-item mt-3 mb-3">
            <a
              class="nav-link mt-1 rounded-pill btn-hover"
              [routerLink]="['/detallesdecuenta']"
            >
              <i class="bi bi-person me-2"></i> Cuenta
            </a>
          </li>
          <li class="nav-item mb-4">
            <a
              class="nav-link rounded-pill btn-hover"
              [routerLink]="['/MisCompras']"
            >
              <i class="bi bi-star me-2"></i> Historial Pedidos
            </a>
          </li>

          <!-- Separador para empujar el resto -->
          <li class="flex-grow-1"></li>

          <!-- Acciones finales abajo -->
          <li class="nav-item mb-3 mt-auto">
            <a
              class="nav-link text-danger rounded-pill btn-hover-danger"
              href="javascript:void(0)"
              (click)="cerrarsesion()"
            >
              <i class="bi bi-box-arrow-left me-2"></i> Cerrar Sesión
            </a>
          </li>
          <li class="nav-item">
            <button
              class="btn btn-danger w-100 rounded-pill btn-hover-danger-trash py-2"
              (click)="desactivacuenta()"
            >
              <i class="bi bi-trash me-2"></i>Desactivar Cuenta
            </button>
          </li>
        </ul>
      </div>
    </aside>

    <!-- Contenido principal -->
    <main class="col-12 col-md-9 col-lg-10 p-4 mt-0 mt-md-5">
      <h1 class="fw-semibold mb-4">Mi Cuenta</h1>
      <hr />

      <!-- Info de usuario -->
      <div class="col-12 col-md-8 pt-3">
        <form>
          <div class="mb-3">
            <label class="form-label">Nombre</label>
            <input
              type="text"
              class="form-control"
              [value]="usuario?.Nombre"
              disabled
            />
          </div>
          <div class="mb-3">
            <label class="form-label">Apellido</label>
            <input
              type="text"
              class="form-control"
              [value]="usuario?.Apellido"
              disabled
            />
          </div>
          <div class="mb-4">
            <label class="form-label">Dirección de Correo Electrónico</label>
            <input
              type="email"
              class="form-control"
              [value]="usuario?.Email"
              disabled
            />
          </div>
        </form>
        <hr />
        <form (ngSubmit)="cambiopass()">
          <div class="mt-5">
            <h5 class="fw-bold">Cambio de Contraseña</h5>
            <div class="bg-light p-3 rounded mb-4">
              <div class="row g-3">
                <div class="col-12">
                  <label class="form-label">Contraseña actual</label>
                  <input
                    type="password"
                    class="form-control"
                    [(ngModel)]="passwordActual"
                    name="passwordactual"
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Nueva contraseña</label>
                  <input
                    type="text"
                    class="form-control"
                    [(ngModel)]="passwordNueva"
                    name="passwordnueva"
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Confirmar nueva contraseña</label>
                  <input
                    type="text"
                    class="form-control"
                    [(ngModel)]="confirmarPassword"
                    name="confirmarPassword"
                  />
                </div>
              </div>
            </div>
            <div class="text-end">
              <button
                type="submit"
                class="btn rounded-pill bg-app-primary text-extra-light-gray my-2 py-2"
              >
                <span class="fw-semibold p-2">
                  <i class="bi bi-save me-2"></i>
                  GUARDAR CAMBIOS
                </span>
              </button>
            </div>
          </div>
        </form>
      </div>
    </main>

    <!-- Offcanvas para móvil -->
    <div
      class="offcanvas offcanvas-start d-md-none"
      tabindex="-1"
      id="sidebarOffcanvas"
      aria-labelledby="sidebarOffcanvasLabel"
    >
      <div class="offcanvas-header mt-2 ms-3">
        <h5 class="offcanvas-title" id="sidebarOffcanvasLabel">Menú</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="offcanvas"
          aria-label="Cerrar"
        ></button>
      </div>

      <!-- Aplica flexbox y 100% de alto -->
      <div class="offcanvas-body d-flex flex-column h-100 pt-0">
        <hr class="m-0" />
        <ul class="nav flex-column flex-grow-1 d-flex mt-2">
          <li class="nav-item mb-3 pt-2">
            <a class="nav-link" [routerLink]="['/home']">
              <i class="bi bi-house-door me-2"></i> Home
            </a>
          </li>
          <li class="nav-item mb-3">
            <a class="nav-link" [routerLink]="['/detallesdecuenta']">
              <i class="bi bi-person me-2"></i> Cuenta
            </a>
          </li>
          <li class="nav-item mb-4">
            <a class="nav-link" [routerLink]="['/MisCompras']">
              <i class="bi bi-star me-2"></i> Historial Pedidos
            </a>
          </li>

          <!-- Separador flexible -->
          <li class="flex-grow-1"></li>
          <hr />
          <!-- Acciones abajo -->
          <li class="nav-item mb-3 mt-auto">
            <a
              class="nav-link text-danger"
              href="javascript:void(0)"
              (click)="cerrarsesion()"
            >
              <i class="bi bi-box-arrow-left me-2"></i> Cerrar Sesión
            </a>
          </li>
          <li class="nav-item">
            <button
              class="btn btn-danger w-100 rounded-pill py-2"
              (click)="desactivacuenta()"
            >
              <i class="bi bi-trash me-2"></i>Desactivar Cuenta
            </button>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
